USE [master]
GO
/****** Object:  Database [spyrosoft]    Script Date: 1/12/2020 10:05:42 AM ******/
CREATE DATABASE [spyrosoft] 
GO
ALTER DATABASE [spyrosoft] SET COMPATIBILITY_LEVEL = 140
GO
IF (1 = FULLTEXTSERVICEPROPERTY('IsFullTextInstalled'))
begin
EXEC [spyrosoft].[dbo].[sp_fulltext_database] @action = 'enable'
end
GO
ALTER DATABASE [spyrosoft] SET ANSI_NULL_DEFAULT OFF 
GO
ALTER DATABASE [spyrosoft] SET ANSI_NULLS OFF 
GO
ALTER DATABASE [spyrosoft] SET ANSI_PADDING OFF 
GO
ALTER DATABASE [spyrosoft] SET ANSI_WARNINGS OFF 
GO
ALTER DATABASE [spyrosoft] SET ARITHABORT OFF 
GO
ALTER DATABASE [spyrosoft] SET AUTO_CLOSE OFF 
GO
ALTER DATABASE [spyrosoft] SET AUTO_SHRINK OFF 
GO
ALTER DATABASE [spyrosoft] SET AUTO_UPDATE_STATISTICS ON 
GO
ALTER DATABASE [spyrosoft] SET CURSOR_CLOSE_ON_COMMIT OFF 
GO
ALTER DATABASE [spyrosoft] SET CURSOR_DEFAULT  GLOBAL 
GO
ALTER DATABASE [spyrosoft] SET CONCAT_NULL_YIELDS_NULL OFF 
GO
ALTER DATABASE [spyrosoft] SET NUMERIC_ROUNDABORT OFF 
GO
ALTER DATABASE [spyrosoft] SET QUOTED_IDENTIFIER OFF 
GO
ALTER DATABASE [spyrosoft] SET RECURSIVE_TRIGGERS OFF 
GO
ALTER DATABASE [spyrosoft] SET  ENABLE_BROKER 
GO
ALTER DATABASE [spyrosoft] SET AUTO_UPDATE_STATISTICS_ASYNC OFF 
GO
ALTER DATABASE [spyrosoft] SET DATE_CORRELATION_OPTIMIZATION OFF 
GO
ALTER DATABASE [spyrosoft] SET TRUSTWORTHY OFF 
GO
ALTER DATABASE [spyrosoft] SET ALLOW_SNAPSHOT_ISOLATION OFF 
GO
ALTER DATABASE [spyrosoft] SET PARAMETERIZATION SIMPLE 
GO
ALTER DATABASE [spyrosoft] SET READ_COMMITTED_SNAPSHOT ON 
GO
ALTER DATABASE [spyrosoft] SET HONOR_BROKER_PRIORITY OFF 
GO
ALTER DATABASE [spyrosoft] SET RECOVERY FULL 
GO
ALTER DATABASE [spyrosoft] SET  MULTI_USER 
GO
ALTER DATABASE [spyrosoft] SET PAGE_VERIFY CHECKSUM  
GO
ALTER DATABASE [spyrosoft] SET DB_CHAINING OFF 
GO
ALTER DATABASE [spyrosoft] SET FILESTREAM( NON_TRANSACTED_ACCESS = OFF ) 
GO
ALTER DATABASE [spyrosoft] SET TARGET_RECOVERY_TIME = 60 SECONDS 
GO
ALTER DATABASE [spyrosoft] SET DELAYED_DURABILITY = DISABLED 
GO
EXEC sys.sp_db_vardecimal_storage_format N'spyrosoft', N'ON'
GO
ALTER DATABASE [spyrosoft] SET QUERY_STORE = OFF
GO
USE [spyrosoft]
GO
/****** Object:  Table [dbo].[__MigrationHistory]    Script Date: 1/12/2020 10:05:43 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[__MigrationHistory](
	[MigrationId] [nvarchar](150) NOT NULL,
	[ContextKey] [nvarchar](300) NOT NULL,
	[Model] [varbinary](max) NOT NULL,
	[ProductVersion] [nvarchar](32) NOT NULL,
 CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY CLUSTERED 
(
	[MigrationId] ASC,
	[ContextKey] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Book]    Script Date: 1/12/2020 10:05:43 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Book](
	[BookId] [int] IDENTITY(1,1) NOT NULL,
	[Author] [nvarchar](max) NOT NULL,
	[Title] [nvarchar](max) NOT NULL,
	[ReleaseDate] [datetime] NULL,
	[ISBN] [nvarchar](max) NOT NULL,
	[Count] [int] NOT NULL,
	[AddDate] [datetime] NOT NULL,
	[ModifiedDate] [datetime] NULL,
	[BookGenreId] [int] NOT NULL,
 CONSTRAINT [PK_dbo.Book] PRIMARY KEY CLUSTERED 
(
	[BookId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Borrow]    Script Date: 1/12/2020 10:05:43 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Borrow](
	[BorrowId] [int] IDENTITY(1,1) NOT NULL,
	[FromDate] [datetime] NOT NULL,
	[ToDate] [datetime] NOT NULL,
	[IsReturned] [bit] NOT NULL,
	[BookId] [int] NOT NULL,
	[UserId] [int] NOT NULL,
 CONSTRAINT [PK_dbo.Borrow] PRIMARY KEY CLUSTERED 
(
	[BorrowId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[DictBookGenre]    Script Date: 1/12/2020 10:05:43 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[DictBookGenre](
	[BookGenreId] [int] IDENTITY(1,1) NOT NULL,
	[Name] [nvarchar](max) NOT NULL,
 CONSTRAINT [PK_dbo.DictBookGenre] PRIMARY KEY CLUSTERED 
(
	[BookGenreId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [dbo].[User]    Script Date: 1/12/2020 10:05:43 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[User](
	[UserId] [int] IDENTITY(1,1) NOT NULL,
	[FirstName] [nvarchar](max) NOT NULL,
	[LastName] [nvarchar](max) NOT NULL,
	[BirthDate] [datetime] NOT NULL,
	[Email] [nvarchar](max) NOT NULL,
	[Phone] [nvarchar](max) NULL,
	[AddDate] [datetime] NOT NULL,
	[ModifiedDate] [datetime] NULL,
	[IsActive] [bit] NOT NULL,
 CONSTRAINT [PK_dbo.User] PRIMARY KEY CLUSTERED 
(
	[UserId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
INSERT [dbo].[__MigrationHistory] ([MigrationId], [ContextKey], [Model], [ProductVersion]) VALUES (N'202001110926028_init', N'DAL.Migrations.Configuration', 0x1F8B0800000000000400DD5BDB6EE336107D2FD07F10F4D416592BC9BEB481BD8BC4C9164673439C5DF42D6024DA262A51AE44A50E8A7E591FFA49FD850E752529EA6AD94E1701029BE41C0E87C3C3CB8CFFFDFB9FF1C78DE71A2F3808894F27E6C9E8D83430B57D87D0E5C48CD8E2DD8FE6C70FDF7E33BE72BC8DF1256BF79EB703491A4ECC1563EB33CB0AED15F65038F2881DF8A1BF6023DBF72CE4F8D6E9F1F14FD6C9898501C2042CC3183F4494110FC75FE0EBD4A7365EB308B937BE83DD302D879A798C6ADC220F876B64E38979797E6D1AE72E41D0F51CBB0BD34094FA0C3150ECEC7388E72CF0E972BE8602E43EBEAE31B45B2037C4A9C26745F3B6BA1F9F72DDAD423083B2A390F95E47C093F7A9312C55BC9749CDDC5860AE2B302B7BE5A38E4D36312F7CFF37D3503B3A9BBA016F145B73140B111C8E78E323038A8EF2990687E07F47C634725914E009C5110B907B64DC47CF2EB17FC1AF8FFE6F984E68E4BAA22AA00CD4490550741FF86B1CB0D707BC10149C39A661C9B2962A9C8B2A72C9306694BD3F358D5B50023DBB389F7161C873E607F8674C71801876EE11633880099B3938B6594903A5BFF388ADFC20EB0F9C0C168869DCA0CD35A64BB69A98F0D1343E910D76B2925487CF94C07A0221164458A3637DBF8F84B978FFDD3E6017A3105F82ADB2CEF9E74758B44DA2B3F9C5EDFE159EFA40294DEED030C58EA31F6F471CE030B220B802AC5E96BB353869809B7D5B01BA452F6419BB7A15A469C0ACC62DC2155927EC19AFF927A1C9A7C0F71E7C37952B6A9EE67E14D87C3CBEB6FA11054BCC64ADC656C147B52C75496C26E8D092AE24A943F0563E517DC8ABE52C0FC760FCFFAED765EB19BFF083C0FFA3C3CEC49BEF7F8E79AFFD263893DCD7ECF2753B087B3DFA83C0CCC2070C9342716E03707AD8536867A4763B7D3D069C0B836119B5824CF9B43F25F52293E6C51A1A2DEA741C5AA7071F559D1E497D490F5E5CA5475CB71597279DB65CD7BCF1BE5775E60B5DD7743B1F1A7045932064FB20ED72D7D7E8503D5F9080AD0621A02B0F1177FF03B85FF97408BBBDFDA3EA2C3CB71979C1DDF8BD8A47CEC3D0B749BC700496154EA6B22E57D431EA8FA9C90464475C9803A013B2060281CE27E60FA5D15522666C28202AE75519FAC45439E88E5EC2758A61831B8CBF124C516823A76C61B08D2397006DE180F30572A740F1408484B232C7116A9335726B07A048753DD572F5F28ED49A4BBCC694F35AEDA40CA041DE9162B8263B8D2DC1C19AFCAED8C4AB5D44B3A38B1E979C6EBBF85CF918D0E0C26FC1CF4A4AB79DE2ADFDAB64FFED7ADE9F5FC5E7A30637904F6803F89574AC130093C3DA1BF52B51E936B3AB3FD8F5F12BD1FEDBF53CB85F25BB27C83090C041F6808218E26578C334676F502F3D7E87E9F14275178E39C74CBADF14FBB444422557936595ADB104A2D437A0650EAFD125A968904FFCBB249D142BB282C1655388CF634223FD039AEA018D07955CE5CCEE25276A3C990810F5E6B5E431B61ABF70A3D50DBE62AF6CDC2DA561EBE6B2717B6C305CFFC126DE5139D83281375278AFC14A9C2D20689DB77AB0D9813BA78C22B86625D1B52C0A675584E1C63768BD867B8C10964B4B8C7912939BBE9B778F5D79098665879A1056AE6DDE135CA6D1122BB5FCDDDFC1F14D9953E033E2D78DA9E3959A8904594119594F020796E7282392AC31FF9C12DFF9F548275458EB130CC0E37B4DFC30A0BA6F492C8E7E22170515EF6153DF8D3C5A7FB0A946C9E259224A56D61E258D4E892069517B0C29D424224915EDF192F893089494B44748634922445AD4C1BED90D5D327056D81E47BEA18B60724D7B44E986A53A51E5D58BF383E2C7A5C34E6979944E87F2526BB510E51DADEB8AAC956EB1341BE487B671155EF218270225256F6696D26DAD3B61EAC45A51A65EB07A42B2808C3C1BFA004F1D52116811918AD20EE4E99771B2B20E7427045A24D213CABB91C3F69B4B761F1251AAEE480773D98A735CBDC3EA845AB8AB5E6C18F3553A6A113F903CB5286E8F55040444A8A2B48383150FFC928F15C5EDB1D2277E11272D6A8F91BED78B1869D1D7B0D7176FF4323564A57B5E8CA5BB88DA24EF3DBF9328778F717A0F68CE132C5D0C9226A601267A210EBF14CC5F4386BD116F309AFFEE4E5D82F9212F6B70832859E09025E146F3F4F8E454C93C7C3B598056183AAEE61EA5A602CA73B5C70C3DC22DDB1811ED9AB12525E5D11714D82B147CE7A1CDF7DB25DA6D07A5499E73E0335322746D027D6232DD764A490972F16C6C971EA71B51EF98635FF36812A9E2A1959E4067D4C19B89F9672C7766CC7E7D12448F8CBB00D6FB99716CFC35548253CDC5E13009663B598062924017F7EC9A27D6CB7E43256FEDC4726ABE56EFE524E76BF58629E76B3D93EE1CA1E1FC964BB1D32A2C772C27E7B4ED3891DAC5F2D744F9F6989CB41B8F55F391B6DB8FD41CA3EDD04A7943BD17829437B49D52522E5025548F7C9F37B1F7AAF93FCD7C3178EE8F12ED3A48868E1C9DEB9178D42B44DEF4AEB9DBD49EAF2A93A7C5A4EDCC619258608F0C8FDE7961FBCDD0F93AB2729288EB3ED3660EE723150F9C3BCCB6F97F64D894E3CC158FCC6D726892A728D87A9F7D98D964BFDC45768DAE9F811370F443D93E3947877B90B41DADC99B736D349BCCCE1256B6CDCE69A19C96931AD35A0E9583237A5665CECCE043EA9069537EC506C2127E130F5419926501C17F214FB12D5155DE6646177EC6988A465913F51A801982633F3A0F1859209B41B58DC330FEADC217E446F135E8193B337A17B175C460C8D87B76A59FAC70E6ADEB3F4E2792751EDFADE31F2A0D31045093F09BCB1DBD8888EBE47A7FD25C3B2A2038A5A7F7633E978CDF9397AF39D26D290A5405949A2FDF891EB1B776012CBCA373C42F48DD750387BDC64B64BF66C1886A90E68990CD3EBE246819202F4C310A79F80A3EEC789B0FFF0112E1BFB91A420000, N'6.1.3-40302')
GO
SET IDENTITY_INSERT [dbo].[Book] ON 
GO
INSERT [dbo].[Book] ([BookId], [Author], [Title], [ReleaseDate], [ISBN], [Count], [AddDate], [ModifiedDate], [BookGenreId]) VALUES (1, N'henryk sienkeiwicz', N'krzyzacy', CAST(N'1911-11-11T00:00:00.000' AS DateTime), N'asdwqe', 1447, CAST(N'2020-01-01T00:00:00.000' AS DateTime), NULL, 1)
GO
INSERT [dbo].[Book] ([BookId], [Author], [Title], [ReleaseDate], [ISBN], [Count], [AddDate], [ModifiedDate], [BookGenreId]) VALUES (3, N'qwe', N'ewqq', CAST(N'2000-01-01T00:00:00.000' AS DateTime), N'123sad', 1, CAST(N'2000-01-01T00:00:00.000' AS DateTime), NULL, 2)
GO
INSERT [dbo].[Book] ([BookId], [Author], [Title], [ReleaseDate], [ISBN], [Count], [AddDate], [ModifiedDate], [BookGenreId]) VALUES (4, N'Martin', N'Clean code', CAST(N'2000-01-01T00:00:00.000' AS DateTime), N'hdfhkn', 42, CAST(N'2000-01-01T00:00:00.000' AS DateTime), NULL, 1)
GO
SET IDENTITY_INSERT [dbo].[Book] OFF
GO
SET IDENTITY_INSERT [dbo].[Borrow] ON 
GO
INSERT [dbo].[Borrow] ([BorrowId], [FromDate], [ToDate], [IsReturned], [BookId], [UserId]) VALUES (1, CAST(N'2020-01-01T00:00:00.000' AS DateTime), CAST(N'2222-02-02T00:00:00.000' AS DateTime), 0, 1, 1)
GO
INSERT [dbo].[Borrow] ([BorrowId], [FromDate], [ToDate], [IsReturned], [BookId], [UserId]) VALUES (4, CAST(N'2000-01-01T00:00:00.000' AS DateTime), CAST(N'2000-01-02T00:00:00.000' AS DateTime), 1, 3, 1)
GO
INSERT [dbo].[Borrow] ([BorrowId], [FromDate], [ToDate], [IsReturned], [BookId], [UserId]) VALUES (5, CAST(N'2000-01-01T00:00:00.000' AS DateTime), CAST(N'2000-01-11T00:00:00.000' AS DateTime), 1, 4, 3)
GO
SET IDENTITY_INSERT [dbo].[Borrow] OFF
GO
SET IDENTITY_INSERT [dbo].[DictBookGenre] ON 
GO
INSERT [dbo].[DictBookGenre] ([BookGenreId], [Name]) VALUES (1, N'Education')
GO
INSERT [dbo].[DictBookGenre] ([BookGenreId], [Name]) VALUES (2, N'Fantasy')
GO
INSERT [dbo].[DictBookGenre] ([BookGenreId], [Name]) VALUES (3, N'Cooking')
GO
INSERT [dbo].[DictBookGenre] ([BookGenreId], [Name]) VALUES (4, N'Sci-fi')
GO
INSERT [dbo].[DictBookGenre] ([BookGenreId], [Name]) VALUES (5, N'Health')
GO
SET IDENTITY_INSERT [dbo].[DictBookGenre] OFF
GO
SET IDENTITY_INSERT [dbo].[User] ON 
GO
INSERT [dbo].[User] ([UserId], [FirstName], [LastName], [BirthDate], [Email], [Phone], [AddDate], [ModifiedDate], [IsActive]) VALUES (1, N'adam', N's', CAST(N'2012-06-17T00:00:00.000' AS DateTime), N'asdf@dummy.tmp', NULL, CAST(N'2020-01-11T22:24:58.127' AS DateTime), CAST(N'2020-01-11T00:00:00.000' AS DateTime), 1)
GO
INSERT [dbo].[User] ([UserId], [FirstName], [LastName], [BirthDate], [Email], [Phone], [AddDate], [ModifiedDate], [IsActive]) VALUES (2, N'niedam', N'ś', CAST(N'2002-06-18T00:00:00.000' AS DateTime), N'nasd@dummy.tmp', N'555-555 ', CAST(N'2020-01-11T22:11:47.290' AS DateTime), NULL, 1)
GO
INSERT [dbo].[User] ([UserId], [FirstName], [LastName], [BirthDate], [Email], [Phone], [AddDate], [ModifiedDate], [IsActive]) VALUES (3, N'Adam', N'Sienkiewicz', CAST(N'1997-08-27T00:00:00.000' AS DateTime), N'sda@asd.pl', N'666999666', CAST(N'2020-01-11T22:12:33.047' AS DateTime), NULL, 0)
GO
INSERT [dbo].[User] ([UserId], [FirstName], [LastName], [BirthDate], [Email], [Phone], [AddDate], [ModifiedDate], [IsActive]) VALUES (4, N'Osoba', N'Losowa', CAST(N'1999-02-11T00:00:00.000' AS DateTime), N'etrd@sgddx.eff', NULL, CAST(N'2020-01-12T00:00:00.000' AS DateTime), CAST(N'2020-01-12T10:03:48.903' AS DateTime), 1)
GO
SET IDENTITY_INSERT [dbo].[User] OFF
GO
/****** Object:  Index [IX_BookGenreId]    Script Date: 1/12/2020 10:05:43 AM ******/
CREATE NONCLUSTERED INDEX [IX_BookGenreId] ON [dbo].[Book]
(
	[BookGenreId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
GO
/****** Object:  Index [IX_BookId]    Script Date: 1/12/2020 10:05:43 AM ******/
CREATE NONCLUSTERED INDEX [IX_BookId] ON [dbo].[Borrow]
(
	[BookId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
GO
/****** Object:  Index [IX_UserId]    Script Date: 1/12/2020 10:05:43 AM ******/
CREATE NONCLUSTERED INDEX [IX_UserId] ON [dbo].[Borrow]
(
	[UserId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
GO
ALTER TABLE [dbo].[Borrow] ADD  DEFAULT ((0)) FOR [IsReturned]
GO
ALTER TABLE [dbo].[User] ADD  DEFAULT ((0)) FOR [IsActive]
GO
ALTER TABLE [dbo].[Book]  WITH CHECK ADD  CONSTRAINT [FK_dbo.Book_dbo.DictBookGenre_BookGenreId] FOREIGN KEY([BookGenreId])
REFERENCES [dbo].[DictBookGenre] ([BookGenreId])
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[Book] CHECK CONSTRAINT [FK_dbo.Book_dbo.DictBookGenre_BookGenreId]
GO
ALTER TABLE [dbo].[Borrow]  WITH CHECK ADD  CONSTRAINT [FK_dbo.Borrow_dbo.Book_BookId] FOREIGN KEY([BookId])
REFERENCES [dbo].[Book] ([BookId])
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[Borrow] CHECK CONSTRAINT [FK_dbo.Borrow_dbo.Book_BookId]
GO
ALTER TABLE [dbo].[Borrow]  WITH CHECK ADD  CONSTRAINT [FK_dbo.Borrow_dbo.User_UserId] FOREIGN KEY([UserId])
REFERENCES [dbo].[User] ([UserId])
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[Borrow] CHECK CONSTRAINT [FK_dbo.Borrow_dbo.User_UserId]
GO
USE [master]
GO
ALTER DATABASE [spyrosoft] SET  READ_WRITE 
GO
